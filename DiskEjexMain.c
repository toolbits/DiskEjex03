#include <SetUpA4.h>#define			SystemEventAdd		0xA9B2//Routinesvoid			main				(void);pascal	short	PatchSystemEvent	(EventRecord*);//Memoriespascal	short	(*GOldSystemEvent)	(EventRecord*);void main(void){	THz			OldZone;	Handle		INITResH;		RememberA0();	SetUpA4();	OldZone = GetZone();	SetZone(SystemZone());		if((INITResH = Get1Resource('INIT',0)) != NULL){		DetachResource(INITResH);		HLockHi(INITResH);				GOldSystemEvent = (void*)StripAddress(NGetTrapAddress(SystemEventAdd,ToolTrap));		NSetTrapAddress((ProcPtr)PatchSystemEvent,SystemEventAdd,ToolTrap);	}		SetZone(OldZone);	RestoreA4();	return;}/*main*/pascal short PatchSystemEvent(EventRecord *TheEvent){	short		Result;		SetUpA4();	if(TheEvent->what == diskEvt && (TheEvent->modifiers & cmdKey) == 0){		Eject(NULL,LoWord(TheEvent->message));	}	Result = GOldSystemEvent(TheEvent);	RestoreA4();	return(Result);}/*PatchSystemEvent*/